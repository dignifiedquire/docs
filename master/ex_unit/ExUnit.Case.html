<!DOCTYPE html>

<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <title>ExUnit v0.15.2-dev Documentation</title>

  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <script src="//code.jquery.com/jquery-1.11.1.min.js"></script>
  <script src="js/highlight.js"></script>

  <script src="js/app.js"></script>


</head>
<body>
  <div id="header">
    <div class="logo"></div>
    <div class="title">
      <h1>
        
        <a href="http://elixir-lang.org/docs.html" target="_top">ExUnit</a>
        
      </h1>
      <h2>v0.15.2-dev</h2>
    </div>
  </div>

  <div class="container">
    <div id="navigation">
      <div class="nav">
        <span><a target="_self" href="modules_list.html">Modules</a></span>
        <span><a target="_self" href="exceptions_list.html">Exceptions</a></span>
        <span><a target="_self" href="protocols_list.html">Protocols</a></span>
      </div>
      <div id="search">Search: <input type="text" /></div>
      <ul id="modules-list" class="section">
  <li>
  <span class="title">
    <a href="ExUnit.html" title="ExUnit">ExUnit</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.html#introduction">Introduction</a>
      </li>
    
    
    <li>
      <a href="ExUnit.html#types">Types</a>
    </li>
    
    
    <li>
      <a href="ExUnit.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.html#configuration/0">configuration/0</a>
          </li>
        
          <li>
            <a href="ExUnit.html#configure/1">configure/1</a>
          </li>
        
          <li>
            <a href="ExUnit.html#run/0">run/0</a>
          </li>
        
          <li>
            <a href="ExUnit.html#start/1">start/1</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Assertions.html" title="ExUnit.Assertions">ExUnit.Assertions</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Assertions.html#introduction">Introduction</a>
      </li>
    
    
    
    <li>
      <a href="ExUnit.Assertions.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.Assertions.html#assert/1">assert/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert/2">assert/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert/4">assert/4</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert_in_delta/4">assert_in_delta/4</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert_raise/2">assert_raise/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert_raise/3">assert_raise/3</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert_receive/3">assert_receive/3</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#assert_received/2">assert_received/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#catch_error/1">catch_error/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#catch_exit/1">catch_exit/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#catch_throw/1">catch_throw/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#flunk/1">flunk/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#refute/1">refute/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#refute/2">refute/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#refute_in_delta/4">refute_in_delta/4</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#refute_receive/3">refute_receive/3</a>
          </li>
        
          <li>
            <a href="ExUnit.Assertions.html#refute_received/2">refute_received/2</a>
          </li>
        
      </ul>
    </li>
    
    
    <li>
      <a href="ExUnit.Assertions.html#macros">Macros</a>
    </li>
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Callbacks.html" title="ExUnit.Callbacks">ExUnit.Callbacks</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Callbacks.html#introduction">Introduction</a>
      </li>
    
    
    
    <li>
      <a href="ExUnit.Callbacks.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.Callbacks.html#on_exit/2">on_exit/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Callbacks.html#setup/2">setup/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Callbacks.html#setup_all/2">setup_all/2</a>
          </li>
        
      </ul>
    </li>
    
    
    <li>
      <a href="ExUnit.Callbacks.html#macros">Macros</a>
    </li>
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.CaptureIO.html" title="ExUnit.CaptureIO">ExUnit.CaptureIO</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.CaptureIO.html#introduction">Introduction</a>
      </li>
    
    
    
    <li>
      <a href="ExUnit.CaptureIO.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.CaptureIO.html#capture_io/1">capture_io/1</a>
          </li>
        
          <li>
            <a href="ExUnit.CaptureIO.html#capture_io/2">capture_io/2</a>
          </li>
        
          <li>
            <a href="ExUnit.CaptureIO.html#capture_io/3">capture_io/3</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Case.html" title="ExUnit.Case">ExUnit.Case</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Case.html#introduction">Introduction</a>
      </li>
    
    
    
    
    <li>
      <a href="ExUnit.Case.html#macros">Macros</a>
    </li>
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.CaseTemplate.html" title="ExUnit.CaseTemplate">ExUnit.CaseTemplate</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.CaseTemplate.html#introduction">Introduction</a>
      </li>
    
    
    
    
    <li>
      <a href="ExUnit.CaseTemplate.html#macros">Macros</a>
    </li>
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.DocTest.html" title="ExUnit.DocTest">ExUnit.DocTest</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.DocTest.html#introduction">Introduction</a>
      </li>
    
    
    
    
    <li>
      <a href="ExUnit.DocTest.html#macros">Macros</a>
    </li>
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Filters.html" title="ExUnit.Filters">ExUnit.Filters</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Filters.html#introduction">Introduction</a>
      </li>
    
    
    <li>
      <a href="ExUnit.Filters.html#types">Types</a>
    </li>
    
    
    <li>
      <a href="ExUnit.Filters.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.Filters.html#eval/4">eval/4</a>
          </li>
        
          <li>
            <a href="ExUnit.Filters.html#normalize/2">normalize/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Filters.html#parse/1">parse/1</a>
          </li>
        
          <li>
            <a href="ExUnit.Filters.html#parse_path/1">parse_path/1</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Formatter.html" title="ExUnit.Formatter">ExUnit.Formatter</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Formatter.html#introduction">Introduction</a>
      </li>
    
    
    <li>
      <a href="ExUnit.Formatter.html#types">Types</a>
    </li>
    
    
    <li>
      <a href="ExUnit.Formatter.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.Formatter.html#format_filters/2">format_filters/2</a>
          </li>
        
          <li>
            <a href="ExUnit.Formatter.html#format_test_case_failure/5">format_test_case_failure/5</a>
          </li>
        
          <li>
            <a href="ExUnit.Formatter.html#format_test_failure/5">format_test_failure/5</a>
          </li>
        
          <li>
            <a href="ExUnit.Formatter.html#format_time/2">format_time/2</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.Test.html" title="ExUnit.Test">ExUnit.Test</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.Test.html#introduction">Introduction</a>
      </li>
    
    
    <li>
      <a href="ExUnit.Test.html#types">Types</a>
    </li>
    
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.TestCase.html" title="ExUnit.TestCase">ExUnit.TestCase</a>
  </span>
  <ul class="subsection">
    
      <li>
        <a href="ExUnit.TestCase.html#introduction">Introduction</a>
      </li>
    
    
    <li>
      <a href="ExUnit.TestCase.html#types">Types</a>
    </li>
    
    
    
    
  </ul>
</li>

</ul>

      <ul id="protocols-list" class="section">
  
</ul>

      <ul id="exceptions-list" class="section">
  <li>
  <span class="title">
    <a href="ExUnit.AssertionError.html" title="ExUnit.AssertionError">ExUnit.AssertionError</a>
  </span>
  <ul class="subsection">
    
    
    
    <li>
      <a href="ExUnit.AssertionError.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.AssertionError.html#exception/1">exception/1</a>
          </li>
        
          <li>
            <a href="ExUnit.AssertionError.html#message/1">message/1</a>
          </li>
        
          <li>
            <a href="ExUnit.AssertionError.html#no_value/0">no_value/0</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.DocTest.Error.html" title="ExUnit.DocTest.Error">ExUnit.DocTest.Error</a>
  </span>
  <ul class="subsection">
    
    
    
    <li>
      <a href="ExUnit.DocTest.Error.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.DocTest.Error.html#exception/1">exception/1</a>
          </li>
        
          <li>
            <a href="ExUnit.DocTest.Error.html#message/1">message/1</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>
<li>
  <span class="title">
    <a href="ExUnit.TimeoutError.html" title="ExUnit.TimeoutError">ExUnit.TimeoutError</a>
  </span>
  <ul class="subsection">
    
    
    
    <li>
      <a href="ExUnit.TimeoutError.html#functions">Functions</a>
      <ul class="functions">
        
          <li>
            <a href="ExUnit.TimeoutError.html#exception/1">exception/1</a>
          </li>
        
          <li>
            <a href="ExUnit.TimeoutError.html#message/1">message/1</a>
          </li>
        
      </ul>
    </li>
    
    
    
  </ul>
</li>

</ul>

    </div>

    <div id="content">
      <h1>
  ExUnit.Case
  
  <a href="#content"></a>
</h1>


<div id="moduledoc" class="section">
  <h2 class="section-title">
    Introduction
    <a href="#introduction" class="detail_link" title="Introduction">#</a>
  </h2>
  <div class="section-content">
    <p>Sets up an ExUnit test case.</p>

<p>This module must be used in other modules as a way to configure
and prepare them for testing.</p>

<p>When used, it accepts the following options:</p>

<ul>
<li>:async - configure Elixir to run that specific test case in parallel with
others. Must be used for performance when your test cases do not change
any global state.</li>
</ul>

<p>This module automatically includes all callbacks defined in
<a href="ExUnit.Callbacks.html"><code>ExUnit.Callbacks</code></a>. See that module&#39;s documentation for more
information.</p>

<h2>Examples</h2>

<pre><code> defmodule AssertionTest do
   # Use the module
   use ExUnit.Case, async: true

   # The `test` macro is imported by ExUnit.Case
   test &quot;always pass&quot; do
     assert true
   end
 end
</code></pre>

<h2>Context</h2>

<p>All tests receive a context as an argument. The context is particularly
useful for sharing information between callbacks and tests:</p>

<pre><code>defmodule KVTest do
  use ExUnit.Case

  setup do
    {:ok, pid} = KV.start_link
    {:ok, [pid: pid]}
  end

  test &quot;stores key-values&quot;, context do
    assert KV.put(context[:pid], :hello, :world) == :ok
    assert KV.get(context[:pid], :hello) == :world
  end
end
</code></pre>

<p>As the context is a map, it can be pattern matched on to extract
information:</p>

<pre><code>test &quot;stores key-values&quot;, %{pid: pid} do
  assert KV.put(pid, :hello, :world) == :ok
  assert KV.get(pid, :hello) == :world
end
</code></pre>

<h2>Tags</h2>

<p>The context is used to pass information from the callbacks to
the test. In order to pass information from the test to the
callback, ExUnit provides tags.</p>

<p>By tagging a test, the tag value can be accessed in the context,
allowing the developer to customize the test. Let&#39;s see an
example:</p>

<pre><code>defmodule FileTest do
  # Changing directory cannot be async
  use ExUnit.Case, async: false

  setup context do
    # Read the :cd tag value
    if cd = context[:cd] do
      prev_cd = File.cwd!
      File.cd!(cd)
      on_exit fn -&gt; File.cd!(prev_cd) end
    end

    :ok
  end

  @tag cd: &quot;fixtures&quot;
  test &quot;reads utf-8 fixtures&quot; do
    File.read(&quot;hello&quot;)
  end
end
</code></pre>

<p>In the example above, we have defined a tag called <code>:cd</code> that is
read in the setup callback to configure the working directory the
test is going to run on.</p>

<p>Tags are also very effective when used with case templates
(<a href="ExUnit.CaseTemplate.html"><code>ExUnit.CaseTemplate</code></a>) allowing callbacks in the case template
to customize the test behaviour.</p>

<p>Note a tag can be set in two different ways:</p>

<pre><code>@tag key: value
@tag :key       # equivalent to setting @tag key: true
</code></pre>

<p>If a tag is given more than once, the last value wins.</p>

<h3>Module tags</h3>

<p>A tag can be set for all tests in a module by setting <code>@moduletag</code>:</p>

<pre><code>@moduletag :external
</code></pre>

<p>If the same key is set via <code>@tag</code>, the <code>@tag</code> value has higher
precedence.</p>

<h3>Reserved tags</h3>

<p>The following tags are set automatically by ExUnit and are
therefore reserved:</p>

<ul>
<li><code>:case</code> - the test case module</li>
<li><code>:test</code> - the test name</li>
<li><code>:line</code> - the line on which the test was defined</li>
<li><code>:file</code> - the file on which the test was defined</li>
</ul>

<h2>Filters</h2>

<p>Tags can also be used to identify specific tests, which can then
be included or excluded using filters. The most common functionality
is to exclude some particular tests from running, which can be done
via <a href="ExUnit.html#configure/1"><code>ExUnit.configure/1</code></a>:</p>

<pre><code># Exclude all external tests from running
ExUnit.configure(exclude: [external: true])
</code></pre>

<p>From now on, ExUnit will not run any test that has the <code>external</code> flag
set to true. This behaviour can be reversed with the <code>:include</code> option
which is usually passed through the command line:</p>

<pre><code>mix test --include external:true
</code></pre>

<p>Run <code>mix help test</code> for more information on how to run filters via Mix.</p>

<p>Another use case for tags and filters is to exclude all tests that have
a particular tag by default, regardless of its value, and include only
a certain subset:</p>

<pre><code>ExUnit.configure(exclude: :os, include: [os: :unix])
</code></pre>

<p>Keep in mind that all tests are included by default, so unless they are
excluded first, the <code>include</code> option has no effect.</p>

  </div>
  
    <a href="https://github.com/elixir-lang/elixir/blob/b8528f6c8e64c7ee981940f53fac72fb42dfcecb/lib/ex_unit/lib/ex_unit/case.ex#L1" class="view_source">Source</a>
  
</div>








  <div id="macros_details" class="section">
    <h2 class="section-title">
      Macros
      <a href="#macros" class="detail_link" title="Macros">#</a>
    </h2>
    <div class="detail">
  <div class="detail_header" id="test/3">
    <div class="title">
      <h3>test(message, var \\ {:_, [], ExUnit.Case}, contents)</h3>
    </div>
    <div class="detail_header_links">
      <span>
        <a href="#test/3" class="detail_link" title="Direct Link">
          <i class="fa fa-link"></i>
        </a>
      </span>
      
        <span>
          <a href="https://github.com/elixir-lang/elixir/blob/b8528f6c8e64c7ee981940f53fac72fb42dfcecb/lib/ex_unit/lib/ex_unit/case.ex#L198" class="view_source" title="View Source">
            <i class="fa fa-code"></i>
          </a>
        </span>
      
      <span class="detail_type">
        (macro)
      </span>
    </div>

  </div>
  
  <div class="docstring"><p>Define a test with a string.</p>

<p>Provides a convenient macro that allows a test to be
defined with a string. This macro automatically inserts
the atom <code>:ok</code> as the last line of the test. That said,
a passing test always returns <code>:ok</code>, but, more importantly,
it forces Elixir to not tail call optimize the test and
therefore avoids hiding lines from the backtrace.</p>

<h2>Examples</h2>

<pre><code>test &quot;true is equal to true&quot; do
  assert true == true
end
</code></pre>
</div>
</div>

  </div>




    </div>
  </div>
</body>
</html>
